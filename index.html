<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/x-icon" href="icons/pegaraw.jpg">
  <title>Sansinukob</title>
<style>

  :root{
      /* Palette */
      --ink-1:#0b1220;
      --ink-2:#0f1727;
      --ink-3:#121a2a;
      --ink-4:#263042;

      --sun-1:#ecac22;
      --sun-2:#f0bc40;
      --sun-3:#fae792;

      --accent:#e27a3e;
      --text-on-dark:#e6edf3;
      --text-on-sun:#0a0a23;

      /* Radii & spacing */
      --r-1:8px;
      --r-2:12px;
      --gap-1:.5rem;
      --gap-2:1rem;
      --gap-3:2rem;

      /* Shadows */
      --shadow-1:0 2px 4px rgba(0,0,0,.2);
    }
    
      .timer {
      background:
        linear-gradient(rgba(0,0,0,.35), rgba(0,0,0,.35)),
        url("/elements/bg2.png");
      background-size:cover;
      background-position: top center;
      padding: 2rem 4vw 4rem;
      min-height: 100vh;
      box-shadow: var(--shadow-1);
    }
    .counter-disp{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:flex-start;
      min-height: 68vh;
      background-image: url("icons/timerbg.png");
      background-repeat:no-repeat;
      background-position: top center;
      background-size: contain;
      padding-top: clamp(10vh, 15vh, 20vh);
      gap:.25rem;
    }

    #counter{
      font-family: "PanasChill", "Golden Age Mini", ui-serif, Georgia, serif;
      font-size: clamp(56px, 14vw, 160px);
      color: var(--accent);
      margin: 0 0 .25rem;
      text-shadow: 0 1px 0 rgba(0,0,0,.25);
    }

    #modeLabel{
      font-family: "Golden Age Mini", "Golden Age", ui-serif, Georgia, serif;
      font-size: clamp(14px, 3.2vw, 22px);
      color: var(--accent);
      letter-spacing:.06em;
      opacity:.95;
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:center;
      margin: var(--gap-2) auto;
    }

    button{
      padding:.7rem 1.1rem;
      border:1px solid var(--ink-4);
      background: var(--ink-3);
      color: var(--text-on-dark);
      border-radius: var(--r-2);
      cursor:pointer;
      font-weight:600;
      transition: transform .06s ease, background .15s ease;
    }
    button:hover{ background:#16223a; }
    button:active{ transform: translateY(1px); }

    .grid{
      display:grid;
      grid-template-columns: repeat(4, minmax(140px,1fr));
      gap:8px;
      max-width: min(960px, 96vw);
      margin: 0 auto;
    }

    .grid input{
      width:100%;
      padding:.6rem .8rem;
      border-radius: var(--r-2);
      border:1px solid var(--ink-4);
      background: var(--ink-2);
      color: var(--text-on-dark);
      outline:none;
    }

    .settings{
      white-space:pre-line;
      background: var(--ink-2);
      padding:.8rem 1rem;
      border-radius: var(--r-2);
      border:1px solid var(--ink-4);
      max-width: min(960px, 96vw);
      margin: .5rem auto 0;
      color: var(--text-on-dark);
      opacity:.9;
    }
    .growth-wrap{
      margin-top:1rem; display:grid; place-items:center; gap:.35rem;
   }
</style>
  
</head>
<body>


  <div class="titlescreen">

  <div class="logo">
    <img src="icons/logo.png" alt="Logo">
  </div>

  <div class="container">

  <a class="btn" href="#timer">
    <img src="icons/start.png" alt="Start Button">
  </a>
  <a href="#about" class="btn">
    <img src="icons/about.png" alt="About Button">
  </a>
  </div>

  </div>

  <div class="image-overlay-wrapper">
  <img src="icons/tree.png" alt="tree" class="top-image1">
   <img src="icons/cat.png" alt="cat" class="top-image2">
</div>

<a id="about"></a>
  <div class="about">
  <img src="icons/about-header1.png" alt="About Header"  id="about-header1">


  <div id="about-header2">
    <img src="icons/about-header2.png" alt="About Header2" >
  </div>

  <p>
    As a farmer, your goal is to stay productive while harvesting a variety of plants each day. Each study session helps your plants grow, and every plant has its own growth time before it can be harvested. As you progress, you’ll unlock rarer plants to grow and collect. Take on the challenge, accomplish your tasks, and build a flourishing collection!
  </p>

  <hr/>

   <div id="about-header2">
    <img src="icons/about-header3.png" alt="About Header2" >
  </div>

<hr/>
  

  <p>
    Sansinukob is a nonprofit Pomodoro timer website and farming simulator heavily inspired by Stardew Valley. It features pixelated native and genetically modified plants from UPLB’s Makiling Botanic Garden (e.g., Mussaenda philippica). It serves as an official entry to the CodeSprout 2025 Hackathon developed by UPLB BS Computer Science students. Special acknowledgement is given to Stardew Valley for being the primary creative inspiration behind the project.
  </p>

</div>

  <a id="timer"></a>
<div class="timer">
  <div class="menu">
 

  
    <div class="counter-disp">
    <h1 id="counter" >25:00</h1>
    <h3 class="mode" id="modeLabel"> UNDER DEVELOPMENT </h3>

  </div>

  </div>
    <div class="controls">
      <button id="start-btn">Start</button>
      <button id="pause-btn">Pause</button>
      <button id="reset-btn">Reset</button>
    </div>

  <div class="grid">
      <input type="number" id="worktime" min="0" placeholder="Work (min) eg. 25" />
      <input type="number" id="sBreak"  min="0" placeholder="Short break (min) eg. 5" />
      <input type="number" id="lBreak"  min="0" placeholder="Long break (min) eg. 15" />
      <input type="number" id="bMaxCounter" min="1" placeholder="Shorts before long eg. 4" />
    </div>

     <div class="growth-wrap">
          <img id="growthFlower" alt="Growth Flower" />
          <div id="growthLabel" style="opacity:.85;font-size:.95rem;"></div>
        </div>

       <div class="controls">
      <button id="set-btn">Apply Settings</button>
    </div>
      <div class="settings" id="timeSet">—</div>

      <img id="flowerImg" alt="Flower" />
  

</body>

<script>



 

//FLOWER OBJECTS BELOW


var flowerData = [
  {
    name: "Kalachuchi",
    growthTime: "12000",
    lockedDesc: "Where colors dare to speak louder than words.",
    fullDesc: "Frangipani - in places of farewell, it blossoms, it blooms, it shouts athe whisphers of memories and the last farewells.",
    iconState1: "sprites/KALACHUCHI/kal1.png",
    iconState2: "sprites/KALACHUCHI/kal2.png",
    iconState3: "sprites/KALACHUCHI/kal3.png",
    iconState4: "sprites/KALACHUCHI/kal4.png",
    iconState5: "sprites/KALACHUCHI/kal5.png",
  },
  {
    name: "Sampaguita",
    growthTime: "15000",
    lockedDesc: "Where childhood secrets taste sweet.",
    fullDesc: "Arabian Jasmine - you can never go wrong with Philippines' national flower. Strung into garlands, sold outside churches and jeepney stops, always carrying that distinct scent.",
    iconState1: "sprites/SAMAPAGUITA/sam1.png",
    iconState2: "sprites/SAMPAGUITA/sam2.png",
    iconState3: "sprites/SAMPAGUITA/sam3.png",
    iconState4: "sprites/SAMPAGUITA/sam4.png",
    iconState5: "sprites/SAMPAGUITA/sam5.png",
  },
  {
    name: "Kahoy-Dalaga",
    growthTime: "30000",
    lockedDesc: "Where fallen petals still smile.",
    fullDesc: "Mussaenda Philippica - blooms like a constellation brought down to earth, each petal a luminous star resting on emerald skies.",
    iconState1: "sprites/MUSSAENDA/mussa1.png",
    iconState2: "sprites/MUSSAENDA/mussa2.png",
    iconState3: "sprites/MUSSAENDA/mussa3.png",
    iconState4: "sprites/MUSSAENDA/mussa4.png",
    iconState5: "sprites/MUSSAENDA/mussa5.png",
  },
  {
    name: "Mirasol",
    growthTime: "45000",
    lockedDesc: "Where tiny sunshines are met.",
    fullDesc: "Sunflower - a poetic symbolism of Filipinos' perceverance, standing tall always turning its face where the light shines.",
    iconState1: "sprites/SAMPAGUITA/sam1.png",
    iconState2: "sprites/SAMPAGUITA/sam2.png",
    iconState3: "sprites/SAMPAGUITA/sam3.png",
    iconState4: "sprites/SAMPAGUITA/sam4.png",
    iconState5: "sprites/SAMPAGUITA/sam5.png",
  },
];

//Progress mapping



  // Map percentage [0..1] to a sprite stage
  function stageByPercent(flower, pct) {
    pct = Math.max(0, Math.min(1, pct));
    if (pct < 0.20) return flower.iconState1;
    if (pct < 0.40) return flower.iconState2;
    if (pct < 0.65) return flower.iconState3;
    if (pct < 0.85) return flower.iconState4 || flower.iconState3;
    return flower.iconState5 || flower.iconState4 || flower.iconState3;
  }



    // Garden thumbs
    const garden = document.getElementById("garden");
    if (garden) {
      garden.innerHTML = "";
      flowerData.forEach(flower => {
        const img = new Image();
        img.src = flower.image || flower.iconState1;
        img.alt = flower.name;
        img.title = flower.name;
        garden.appendChild(img);
      });
    }

    // Sampaguita growth demo (independent)
    const sampaguita = flowerData.find(f => f.name === "Sampaguita");
    const stageImg = $("stageImg");
    if (sampaguita && stageImg) {
      const sprites = [
        sampaguita.iconState1,
        sampaguita.iconState2,
        sampaguita.iconState3,
        sampaguita.iconState4,
        sampaguita.iconState5,
      ].filter(Boolean);

      let i = 0;
      const nextStage = () => {
        stageImg.src = sprites[i % sprites.length];
        stageImg.alt = `${sampaguita.name} stage ${((i % sprites.length) + 1)}`;
        i++;
      };
      nextStage();
      setInterval(nextStage, 2000);
    }
  

  // ---------------------- GROWTH FLOWER (timer-linked) ----------------------
  const growthFlowerName = "Sampaguita"; // change to any name in flowerData
  const growthFlower = flowerData.find(f => f.name === growthFlowerName) || flowerData[0];

  // Will be set to the total seconds of the current interval whenever mode changes
  let intervalTotalSeconds = 25 * 60;

  function refreshGrowthFlower(percentThroughInterval = 0) {
    if (!growthFlower) return;
    const img = document.getElementById("growthFlower");
    const label = document.getElementById("growthLabel");
    if (!img || !label) return;

    img.src = stageByPercent(growthFlower, percentThroughInterval);
    img.alt = `${growthFlower.name} growth`;
    const pctText = Math.round(percentThroughInterval * 100);
    label.textContent = `${growthFlower.name} • ${pctText}% grown`;
  }

//TIMER PROPER FROM BELOW

 let timer = null;
    let isPaused = true;

    // durations (seconds)
    let workSeconds   = 25 * 60;
    let shortSeconds  = 5 * 60;
    let longSeconds   = 15 * 60;

    // how many short breaks between long ones
    let maxShortsBeforeLong = 4; // after 4 work sessions, take a long break

    // runtime counters
    let totalSeconds = workSeconds;
    let shortBreaksTaken = 0; // increments after finishing a short break cycle

    // current mode: 'work' | 'short' | 'long'
    let mode = 'work';

    // ---------------- Helpers ----------------
    const $ = (id) => document.getElementById(id);

    function minutesToSeconds(m) { return Math.max(0, Math.floor(Number(m || 0) * 60)); }

    function formatTime(sec) {
      const s = Math.max(0, Math.floor(sec));
      const mm = String(Math.floor(s / 60)).padStart(2, '0');
      const ss = String(s % 60).padStart(2, '0');
      return `${mm}:${ss}`;
    }

    function updateCounter() { $('counter').innerText = formatTime(totalSeconds); }
    function updateModeLabel() { $('modeLabel').innerText = `Mode: ${mode[0].toUpperCase()}${mode.slice(1)}`; }

    function setMode(nextMode, setFreshTime = true) {
      mode = nextMode;
      updateModeLabel();
      if (setFreshTime) {
        if (mode === 'work') totalSeconds = workSeconds;
        if (mode === 'short') totalSeconds = shortSeconds;
        if (mode === 'long') totalSeconds = longSeconds;
      }
      updateCounter();
    }

    function clearTick() {
      if (timer != null) { clearInterval(timer); timer = null; }
    }

    function tick() {
      if (isPaused) return;
      totalSeconds -= 1;
      updateCounter();
      if (totalSeconds <= 0) {
        clearTick();
        onIntervalFinished();
      }
    }

    function startCountdown() {
      // if durations are zero, avoid infinite loops
      const durationForMode = (mode === 'work') ? workSeconds : (mode === 'short' ? shortSeconds : longSeconds);
      if (durationForMode <= 0) {
        alert('Please set durations greater than 0 minutes.');
        return;
      }

      // If no remaining time (e.g., after a reset), reload the current mode duration
      if (totalSeconds <= 0) setMode(mode, true);

      isPaused = false;
      clearTick();
      updateCounter();
      timer = setInterval(tick, 1000);
    }

    function pauseResume() {
      isPaused = !isPaused;
      $('pause-btn').innerText = isPaused ? 'Resume' : 'Pause';
      if (!isPaused && timer == null) {
        timer = setInterval(tick, 1000);
      }
    }

    function resetTimer() {
      clearTick();
      isPaused = true;
      $('pause-btn').innerText = 'Pause';
      setMode('work', true);
      shortBreaksTaken = 0;
    }

    function onIntervalFinished() {
      // when an interval hits 0, choose the next mode and auto-start it
      if (mode === 'work') {
        // After finishing WORK: decide short vs long break
        if ((shortBreaksTaken + 1) >= maxShortsBeforeLong) {
          setMode('long', true);
          shortBreaksTaken = 0; // reset the cycle when taking a long break
        } else {
          setMode('short', true);
          shortBreaksTaken += 1; // we are about to take a short break in this cycle
        }
      } else if (mode === 'short') {
        setMode('work', true);
      } else if (mode === 'long') {
        setMode('work', true);
      }
      // auto-continue
      startCountdown();
    }

    // ---------------- Settings ----------------
    $('set-btn').onclick = function () {
      const w  = $('worktime').valueAsNumber;
      const sb = $('sBreak').valueAsNumber;
      const lb = $('lBreak').valueAsNumber;
      const bc = $('bMaxCounter').valueAsNumber;

      workSeconds  = minutesToSeconds(Number.isFinite(w)  ? w  : 25);
      shortSeconds = minutesToSeconds(Number.isFinite(sb) ? sb : 5);
      longSeconds  = minutesToSeconds(Number.isFinite(lb) ? lb : 15);
      maxShortsBeforeLong = Math.max(1, Math.floor(Number.isFinite(bc) ? bc : 4));

      // keep current mode but refresh remaining time to match new settings
      setMode(mode, true);

      $('timeSet').innerText =
`Work Time: ${Math.floor(workSeconds/60)} min\nShort Break: ${Math.floor(shortSeconds/60)} min\nLong Break: ${Math.floor(longSeconds/60)} min\nShorts before Long: ${maxShortsBeforeLong}`;
    };

    // event callers
    $('start-btn').onclick = startCountdown;
    $('pause-btn').onclick = pauseResume;
    $('reset-btn').onclick = resetTimer;

    // initial call for statuses
    updateModeLabel();
    updateCounter();

</script>

</html>